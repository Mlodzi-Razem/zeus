{% extends "server_ui/templates/base.html" %}
{% load i18n %}

{% block content %}
<div class="row">
    <div class="col-12">

        <h4>{% trans "Elections" %}</h4>

        {% block present-elections-list %}
        <div class="table-responsive">
                <table class="table table-striped table-hover" id="elections-table">
                <thead class="table-dark">
                    <tr>
                        <th>{% trans "Name" %}</th>
                        <th class="d-none d-xl-table-cell">{% trans "Application start" %}</th>
                        <th class="d-none d-lg-table-cell">{% trans "Application end" %}</th>
                        <th class="d-none d-lg-table-cell">{% trans "Voting start" %}</th>
                        <th class="d-none d-lg-table-cell">{% trans "Voting end" %}</th>
                        <th>{% trans "Send application" %}</th>
                        <th>{% trans "Presentations" %}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for election in elections %}
                        <tr>
                            <td>{{ election.name }}</td>
                            <td class="d-none d-xl-table-cell">{{ election.applications_starts_at|date:"Y-m-d H:i" }}</td>
                            <td class="d-none d-lg-table-cell">{{ election.applications_ends_at|date:"Y-m-d H:i" }}</td>
                            <td class="d-none d-lg-table-cell">{{ election.voting_starts_at|date:"Y-m-d H:i" }}</td>
                            <td class="d-none d-lg-table-cell">{{ election.voting_ends_at|date:"Y-m-d H:i" }}</td>
                            <td>
                                {% if election.applications_starts_at.timestamp <= now and now <= election.applications_ends_at.timestamp %}
                                    <a class="btn btn-sm btn-primary"
                                       href="{% url 'election_form' election.uuid %}">
                                        {% trans "Send application" %}
                                    </a>
                                {% else %}
                                    <span class="badge bg-secondary">
                                        {% trans "Applications closed" %}
                                    </span>
                                {% endif %}
                            </td>
                            <td>
                                <a class="btn btn-sm btn-outline-secondary"
                                   href="{% url 'election_presentations' election.uuid %}">
                                    {% trans "Presentations" %}
                                </a>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="7" class="text-center text-muted">
                                {% trans "No results found" %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endblock %}

    </div>
</div>
{% endblock %}
