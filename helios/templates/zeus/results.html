{% extends "server_ui/templates/base.html" %}
{% load i18n %}

{% block tabs_menu %}
{% include "zeus/_menu_partial.html" %}
{% endblock %}

{% block content %}
<h4>{% trans "Election results" %} {{election.name}}</h4>

{% for poll in election.polls.all %}
{% with poll.zeus.get_results as zeus_results %}
{% with poll.zeus.get_results_pretty as results %}
<table class="results twelve">
  <thead>
    <tr>
      <th>{{ poll.type_params.question_title }}</th>
      <th>{% trans "Total votes" %}</th>
    </tr>
  </thead>
  <tbody>
    {% for party in results %}
    <tr class="party">
      <td>{{ party.name|linebreaksbr }}</td>
      <td>{{ party.total }}</td>
    </tr>
    {% for name, count in party.candidates.items %}
    <tr>
      <td>{{ name }}</td>
      <td>{{ count }}</td>
    </tr>
    {% endfor %}
  {% endfor %}
  </tbody>
</table>
{% endwith %}
{% endwith %}
{% endfor %}
{% endblock %}